Custom HTTP library using AJAX and callbacks